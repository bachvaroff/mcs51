0000:              .equ     cin, 0x0032
0000:              .equ     cout, 0x0030
0000:              .equ     phex, 0x0034
0000:              .equ     phex16, 0x0036
0000:              .equ     nl, 0x0048
                   
4000:              .org     0x4000
                   
                   test:
                   ;--------------------------------
4000: C2 91                 clr     p1.1
4002: 78 55                 mov     r0, #0x55
4004: 79 40                 mov     r1, #0x40
4006: 7E 00                 mov     r6, #0x00
4008: 7F 20                 mov     r7, #0x20
400A: 11 2F                 acall   test_page
400C: 78 AA                 mov     r0, #0xaa
400E: 79 40                 mov     r1, #0x40
4010: 7E 00                 mov     r6, #0x00
4012: 7F 20                 mov     r7, #0x20
4014: 11 2F                 acall   test_page
4016: D2 91                 setb    p1.1
4018: 78 55                 mov     r0, #0x55
401A: 79 40                 mov     r1, #0x40
401C: 7E 00                 mov     r6, #0x00
401E: 7F 20                 mov     r7, #0x20
4020: 11 2F                 acall   test_page
4022: 78 AA                 mov     r0, #0xaa
4024: 79 40                 mov     r1, #0x40
4026: 7E 00                 mov     r6, #0x00
4028: 7F 20                 mov     r7, #0x20
402A: 11 2F                 acall   test_page
                   ;--------------------------------
402C: 02 00 00              ljmp    0x0000
                   
                   ;--------
                   ; r0 = fill byte; r1 = final dph; r6 = dpl; r7 = dph
                   test_page:
402F: 8E 82                 mov     dpl, r6
4031: 8F 83                 mov     dph, r7
4033: 11 42                 acall   fill
4035: 8E 82                 mov     dpl, r6
4037: 8F 83                 mov     dph, r7
4039: 11 4B                 acall   dump
403B: 12 00 48              lcall   nl
403E: 12 00 32              lcall   cin
4041: 22                    ret
                   ;--------
                            
                   ;--------
                   fill:
4042: E8                    mov     a, r0
4043: F0                    movx    @dptr, a
4044: A3                    inc     dptr
4045: E5 83                 mov     a, dph
4047: 69                    xrl     a, r1
4048: 70 F8                 jnz     fill
404A: 22                    ret
                   ;--------
                   
                   ;--------
                   dump:
404B: 12 00 36              lcall   phex16
404E: 74 20                 mov     a, #' '
4050: 12 00 30              lcall   cout    
                   dumpb:
4053: E0                    movx    a, @dptr
4054: 12 00 34              lcall   phex
4057: A3                    inc     dptr
4058: E5 82                 mov     a, dpl
405A: 54 1F                 anl     a, #0x1f
405C: 70 05                 jnz     print_sp
405E: 12 00 48              lcall   nl
4061: 80 07                 sjmp    next
                   print_sp:
4063: 74 20                 mov     a, #' '
4065: 12 00 30              lcall   cout
4068: 80 E9                 sjmp    dumpb
                   next:
406A: E5 83                 mov     a, dph
406C: 69                    xrl     a, r1
406D: 70 DC                 jnz     dump
406F: 22                    ret
                   ;--------
                   
